// Generated by CoffeeScript 1.10.0

/*
    Usage
    lets say, to print a variable use, ?_ varName _?
 */
var Template;

Template = (function() {
  function Template() {}

  Template.parse = function(string) {
    var fn, match, strB, variableRegex, vars;
    console.log(string);
    vars = [];
    variableRegex = /\?__[\ ]?(.*?)[\ ]?_\?/g;
    while (match = variableRegex.exec(string)) {
      vars.push(match[1]);
    }
    strB = string.replace(variableRegex, '').replace(/[\r\t\n]/g, ' ').replace(/\?_(.*?)_\?/g, '\' + $1 + \'').trim();
    strB = "'" + strB + "'";
    if (vars.length) {
      vars = "var " + (vars.join(',')) + ";";
    } else {
      vars = '';
    }
    fn = new Function('obj', "var result = \"\"; with (obj) { " + vars + " result = " + strB + "; } return result;");
    console.log(fn);
    return fn;
  };

  return Template;

})();
